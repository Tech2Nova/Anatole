<!doctype html>
<html
  dir="ltr"
  lang="zh"
  data-theme=""
  
    class="html theme--light"
  
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <title>
    
      
        Linux LXCå®¹å™¨ä½¿ç”¨ |
      Chenxi Dang

  </title>

  <meta name="generator" content="Hugo 0.152.2"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Chenxi Dang" />
  <meta
    name="description"
    content="Call me Chenxi"
  />
  

  
        <link rel="stylesheet" href="/css/anatole.ltr.css" />
      
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
    
    
    <link
      rel="stylesheet"
      href="/css/chroma-github.min.a968f0f04450fa39b333459807fbe64fe349f702243723da32a2274d98e47edd.css"
      integrity="sha256-qWjw8ERQ&#43;jmzM0WYB/vmT&#43;NJ9wIkNyPaMqInTZjkft0="
      crossorigin="anonymous"
      media="screen"
    />
  
    
    
    <link
      rel="stylesheet"
      href="/css/custom.min.ea4eedd7216c464b396f3452571684816478956522664d7f4071d634bc025602.css"
      integrity="sha256-6k7t1yFsRks5bzRSVxaEgWR4lWUiZk1/QHHWNLwCVgI="
      crossorigin="anonymous"
      media="screen"
    />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.10cb17328b3207590ce3d89fb482e7cd6937d8138cef2059c69cabd65ab7d6c6.css"
    integrity="sha256-EMsXMosyB1kM49iftILnzWk32BOM7yBZxpyr1lq31sY="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.7aa4d559d5fadcfed666b5679be54d0dbbcf6a0542742319765b253d2797cc44.css"
    integrity="sha256-eqTVWdX63P7WZrVnm&#43;VNDbvPagVCdCMZdlslPSeXzEQ="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.a699c3ab02229020e2d51dfe6c9a4cc556fd7781edbc166e2af9d0db9d5c66ce.css"
    integrity="sha256-ppnDqwIikCDi1R3&#43;bJpMxVb9d4HtvBZuKvnQ251cZs4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.1d88b60c86c4bb253fa4d4c085d27f7ee1f6eca544f7b50b227a2e63fbcfbaaa.css"
    integrity="sha256-HYi2DIbEuyU/pNTAhdJ/fuH27KVE97ULInouY/vPuqo="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="http://localhost:1313/post/lxc_command/" />
  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.8724ddf9268dee451060f191961647573c7f592fbccc6d858746236b3f915813.js"
      integrity="sha256-hyTd&#43;SaN7kUQYPGRlhZHVzx/WS&#43;8zG2Fh0Yjaz&#43;RWBM="
      crossorigin="anonymous"
    ></script>
  

  

  

  


  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/images/site-feature-image.png">
  <meta name="twitter:title" content="Linux LXCå®¹å™¨ä½¿ç”¨">
  <meta name="twitter:description" content="åœ¨ Ubuntu ä¸»æœºä¸­ä½¿ç”¨ LXC å®¹å™¨çš„å„ç±»æƒ…å†µ">



  
  <meta property="og:url" content="http://localhost:1313/post/lxc_command/">
  <meta property="og:site_name" content="æˆ‘çš„åšå®¢">
  <meta property="og:title" content="Linux LXCå®¹å™¨ä½¿ç”¨">
  <meta property="og:description" content="åœ¨ Ubuntu ä¸»æœºä¸­ä½¿ç”¨ LXC å®¹å™¨çš„å„ç±»æƒ…å†µ">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2026-01-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2026-01-20T00:00:00+00:00">
    <meta property="og:image" content="http://localhost:1313/images/site-feature-image.png">



  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "Linux LXCå®¹å™¨ä½¿ç”¨",
        "headline": "Linux LXCå®¹å™¨ä½¿ç”¨",
        "alternativeHeadline": "",
        "description": "
      
        \u003cp\u003eåœ¨ Ubuntu ä¸»æœºä¸­ä½¿ç”¨ LXC å®¹å™¨çš„å„ç±»æƒ…å†µ\u003c\/p\u003e


      


    ",
        "license": "",
        
        "inLanguage": "zh",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/post\/lxc_command\/"
        },
        "author" : {
            "@type": "Person",
            "name": "chenxi"
        },
        "creator" : {
            "@type": "Person",
            "name": "chenxi"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "chenxi"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "chenxi"
        },
        "dateCreated": "2026-01-20T00:00:00.00Z",
        "datePublished": "2026-01-20T00:00:00.00Z",
        "dateModified": "2026-01-20T00:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "chenxi",
            "url": "http://localhost:1313/",
            "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/localhost:1313\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "http://localhost:1313/images/site-feature-image.png"


      
      ]

    ,
        "url" : "http:\/\/localhost:1313\/post\/lxc_command\/",
        "wordCount" : "377",
        "genre" : [ 
      
      "Blog"

    ],
        "keywords" : [ ]
    }
  </script>




  
  
  



<style>
  .welcome-text {
      font-size: 2rem;
      color: #878787;           
      text-align: center;
      margin: 20px 0;
      font-weight: bold;
       
  }
</style>
</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"
        
      >
<div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/profile.jpg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">I&#39;m Chenxi Dang</a>
        </div>
      
      <div class="sidebar__introduction-description">
        <p>Call me Chenxi</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/Tech2Nova/"
            target="_blank"
            rel="noopener me"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fa-brands fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="mailto:Dangchenxi650@163.com"
            target="_blank"
            rel="noopener me"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fa-solid fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://weixin.qq.com/"
            target="_blank"
            rel="noopener me"
            aria-label="WeChat"
            title="WeChat"
          >
            <i class="fa-brands fa-weixin fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://www.bilibili.com/"
            target="_blank"
            rel="noopener me"
            aria-label="Bilibili"
            title="Bilibili"
          >
            <i class="fa-brands fa-bilibili fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  
  </div>

  
    <div class="welcome-text">
    ğŸ‘‹ èŠ±å¾„ä¸æ›¾ç¼˜å®¢æ‰«ï¼Œè“¬é—¨ä»Šå§‹ä¸ºå›å¼€ã€‚
    </div>
  <footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Chenxi Dang
        2026
      
    </li>
    
      <li class="footer__item">
        <a
          class="link"
          href="/imprint/"
          
          title=""
        >
          æ³•å¾‹å£°æ˜
        </a>
      </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.9531b4a2217a70c5a1fce89c1f81c9ebbdd586708fcd4130b417320c7230c8d6.js"
    integrity="sha256-lTG0oiF6cMWh/OicH4HJ673VhnCPzUEwtBcyDHIwyNY="
    crossorigin="anonymous"
  ></script></div>

</aside>
      <main
        
          class="wrapper__main"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/"
              
              title=""
              >é¦–é¡µ</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/post/"
              
              title=""
              >æ–‡ç« </a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/categories/"
              
              title=""
              >ä¸“é¢˜</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/about/"
              
              title=""
              >å…³äºæˆ‘</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/work/"
              
              title=""
              >å·¥ä½œç»å†</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    
    <div class="post__content">
      
        <h1>Linux LXCå®¹å™¨ä½¿ç”¨</h1>
      
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                
                  2026å¹´01æœˆ20æ—¥
                

              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text"></span>
          </li>
        </ul>
      <p>åœ¨ Ubuntu ä¸»æœºä¸­ä½¿ç”¨ LXC å®¹å™¨çš„å„ç±»æƒ…å†µ</p>
<h5 id="11-lxcä»‹ç»">1.1 LXCä»‹ç»</h5>
<p>Proxmox VE (PVE) æä¾›äº†ä¸¤ç§ä¸»è¦çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼šå®Œæ•´çš„è™šæ‹Ÿæœº(KVM)å’Œè½»é‡çº§çš„Linuxå®¹å™¨(LXC)ã€‚</p>
<p>LXCæ˜¯Linuxå®¹å™¨ï¼ˆLinux Containersï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§è½»é‡çº§çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚</p>
<p>LXCå®¹å™¨åˆ©ç”¨Linuxå†…æ ¸çš„cgroupå’ŒnamespaceæŠ€æœ¯ï¼Œåœ¨åº”ç”¨å±‚åˆ›å»ºéš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œä¸å®¿ä¸»æœºå…±äº«åŒä¸€ä¸ªå†…æ ¸ï¼Œä½†æ‹¥æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œè¿›ç¨‹ç©ºé—´ã€‚ä¸Dockerç­‰åº”ç”¨å®¹å™¨ä¸åŒï¼ŒLXCæ˜¯<strong>ç³»ç»Ÿå®¹å™¨</strong>ï¼Œå¯ä»¥è¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬initç³»ç»Ÿã€åå°æœåŠ¡å’Œå„ç§ç³»ç»Ÿå·¥å…·ã€‚PVEä¸­çš„LXCå®¹å™¨åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>æ— ç‰¹æƒå®¹å™¨(Unprivileged Containers)</strong>ï¼šé»˜è®¤é€‰é¡¹ï¼Œå®‰å…¨æ€§è¾ƒé«˜</li>
<li><strong>ç‰¹æƒå®¹å™¨(Privileged Containers)</strong>ï¼šæ‹¥æœ‰æ›´é«˜æƒé™ï¼Œèƒ½ç›´æ¥è®¿é—®å®¿ä¸»æœºèµ„æº</li>
</ul>
<h5 id="12-å®‰è£…lxc">1.2 å®‰è£…LXC</h5>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šåœ¨æ‚¨çš„ Linux å‘è¡Œç‰ˆä¸­æ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬çš„ LXCã€‚ç›´æ¥åœ¨å‘è¡Œç‰ˆçš„è½¯ä»¶åŒ…åº“ä¸­ï¼Œæˆ–è€…é€šè¿‡ä¸€äº›ç§»æ¤é€šé“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt-get install lxc
</span></span></code></pre></div><p>æ‚¨çš„ç³»ç»Ÿå°†æ‹¥æœ‰æ‰€æœ‰ LXC å‘½ä»¤ï¼Œä»¥åŠæ‰€æœ‰æ¨¡æ¿ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Linux å†…æ ¸æ˜¯å¦å…·æœ‰å¿…éœ€çš„é…ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">lxc-checkconfig
</span></span></code></pre></div><p>æ‰€æœ‰å¯ç”¨çš„ LXC æ¨¡æ¿éƒ½ä½äº /usr/local/share/lxc/templates ç›®å½•ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ls -1 /usr/local/share/lxc/templates</span>
</span></span></code></pre></div><h5 id="13-åˆ›å»ºå¹¶å¯åŠ¨lxcå®¹å™¨åœ¨rootæƒé™ä¸‹è¿›è¡Œ">1.3 åˆ›å»ºå¹¶å¯åŠ¨LXCå®¹å™¨ï¼ˆåœ¨rootæƒé™ä¸‹è¿›è¡Œï¼‰</h5>
<p>ç‰¹æƒå®¹å™¨æ˜¯ç”± root åˆ›å»ºå¹¶ä½œä¸º root è¿è¡Œçš„å®¹å™¨ã€‚</p>
<p>ç‰¹æƒå®¹å™¨æ˜¯å¼€å§‹å­¦ä¹ å’Œè¯•éªŒ LXC çš„æœ€ç®€å•æ–¹æ³•ï¼Œä½†å®ƒä»¬å¯èƒ½ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-create --name mycontainer --template download -- --dist ubuntu --release jammy --arch amd64
</span></span></code></pre></div><p>è¯´æ˜ï¼š</p>
<ul>
<li>mycontaineræ›¿æ¢ä¸ºåˆ›å»ºå®¹å™¨çš„åå­—</li>
<li>Distribution: ubuntu</li>
<li>Release: jammy æˆ– noble</li>
<li>Architecture: amd64</li>
</ul>
<p>åˆ›å»ºå®¹å™¨åï¼Œæ‚¨å¯ä»¥å¯åŠ¨å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-start --name mycontainer
</span></span></code></pre></div><p>æ‚¨å¯ä»¥æŸ¥çœ‹æœ‰å…³å®¹å™¨çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-info --name mycontainer
</span></span><span class="line"><span class="cl">Name:           mycontainer
</span></span><span class="line"><span class="cl">State:          RUNNING
</span></span><span class="line"><span class="cl">PID:            <span class="m">3250</span>
</span></span><span class="line"><span class="cl">IP:             10.0.3.224
</span></span><span class="line"><span class="cl">Link:           vethgmeH9z
</span></span><span class="line"><span class="cl">TX bytes:      1.51 KiB
</span></span><span class="line"><span class="cl">RX bytes:      2.15 KiB
</span></span><span class="line"><span class="cl">Total bytes:   3.66 KiB
</span></span></code></pre></div><p>æ‚¨å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-ls --fancy
</span></span><span class="line"><span class="cl">NAME        STATE   AUTOSTART GROUPS IPV4       IPV6 UNPRIVILEGED 
</span></span><span class="line"><span class="cl">mycontainer RUNNING <span class="m">0</span>         -      10.0.3.224 -    <span class="nb">false</span>
</span></span></code></pre></div><p>LXCå®¹å™¨åªæä¾›å‘½ä»¤è¡Œé¢æ¿ï¼Œlxc-attachå‘½ä»¤å¯åŠ¨å®¹å™¨ shellã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-attach --name mycontainer
</span></span></code></pre></div><p>é€€å‡ºå®¹å™¨ shellã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@mycontainer:~# <span class="nb">exit</span>
</span></span></code></pre></div><p>æ‚¨å¯ä»¥åœæ­¢å®¹å™¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-stop --name mycontainer
</span></span></code></pre></div><p>å¦‚æœæ‚¨ä¸å†éœ€è¦è¯¥å®¹å™¨ï¼Œåˆ™å¯ä»¥æ°¸ä¹…é”€æ¯å®ƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# lxc-destroy --name mycontainer
</span></span></code></pre></div><h5 id="14-lxcå®¹å™¨é…ç½®">1.4 LXCå®¹å™¨é…ç½®</h5>
<p>å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ´»åŠ¨ä»…é™äº <code>/var/lib/lxc/&lt;container-name&gt;/rootfs</code></p>
<p>å¦‚æœæƒ³å®ç°åœ¨ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å…±äº«æŸäº›æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åˆ›å»ºå®¹å™¨å¤–éƒ¨çš„ä¸»æœºå·ï¼Œç„¶åå°†è¯¥å·æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ã€‚</p>
<p>é¦–å…ˆåœ¨hostä¸­åˆ›å»ºä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹ï¼ˆè®°å¾—èµ‹äºˆæƒé™ï¼Œchmod +xï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@host:~# mkdir -p /home/mz/Desktop/lxc-share 
</span></span></code></pre></div><p>ç„¶åç¼–è¾‘å®¹å™¨é…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /var/lib/lxc/encrypt/config
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#åœ¨æœ€åä¸€è¡Œè¿½åŠ ä»¥ä¸‹å†…å®¹</span>
</span></span><span class="line"><span class="cl">lxc.mount.entry <span class="o">=</span> /home/mz/Desktop/lxc-share share none bind,create<span class="o">=</span>dir <span class="m">0</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ï¼ï¼ï¼ï¼ï¼å®¹å™¨è·¯å¾„ä¸è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚/shareï¼Œç›´æ¥ä½¿ç”¨share
</span></span></code></pre></div><p>è¯´æ˜ï¼š</p>
<ul>
<li>lxc.mount.entry æ˜¯ LXC çš„æ ‡å‡†æŒ‚è½½è¯­æ³•</li>
<li>create=dirï¼šè‡ªåŠ¨åˆ›å»ºå®¹å™¨å†…çš„ /mnt/share ç›®å½•</li>
<li>bindï¼šç»‘å®šæŒ‚è½½</li>
<li>0 0ï¼šdump å’Œ fsck é¡ºåº</li>
</ul>
<p>é…ç½®å®¹å™¨åï¼Œé‡æ–°å¯åŠ¨å®ƒä»¥ä½¿ç”¨æ–°é…ç½®ã€‚</p>
<h5 id="15-lxcå®¹å™¨å¿«ç…§">1.5 LXCå®¹å™¨å¿«ç…§</h5>
<p>ï¼ï¼æ³¨æ„ï¼Œæ‹æ‘„å¿«ç…§æ—¶ï¼Œå®¹å™¨ä¸€å®šè¦æ˜¯åœæ­¢çŠ¶æ€</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">lxc-snapshot mycontainer
</span></span></code></pre></div><p>ç”Ÿæˆçš„å¿«ç…§å­˜æ”¾åœ¨/var/lib/lxc/ä½ çš„å®¹å™¨å/snaps/ä¸­ï¼Œå¿«ç…§åç§°ä¾æ¬¡ä»snap0, snap1 &hellip; snapn</p>
<p>æŸ¥çœ‹å½“å‰å­˜åœ¨çš„å¿«ç…§</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo lxc-snapshot -L -n ä½ çš„å®¹å™¨å          <span class="c1"># åˆ—å‡ºæ‰€æœ‰å¿«ç…§</span>
</span></span></code></pre></div><p>æ¢å¤å¿«ç…§</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ¢å¤å¹¶è¦†ç›–åŸå®¹å™¨</span>
</span></span><span class="line"><span class="cl">sudo lxc-snapshot -r å¿«ç…§å -n ä½ çš„å®¹å™¨å
</span></span></code></pre></div><p>åˆ é™¤å¿«ç…§</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo lxc-snapshot -d å¿«ç…§å -n ä½ çš„å®¹å™¨å
</span></span></code></pre></div><h5 id="16-æ‰‹åŠ¨åˆ›å»ºlxcå®¹å™¨å¿«ç…§">1.6 æ‰‹åŠ¨åˆ›å»ºLXCå®¹å™¨å¿«ç…§</h5>
<p>å½“æ— æ³•ä½¿ç”¨lxc-createå‘½ä»¤åˆ›å»ºå®¹å™¨æ—¶ï¼Œä¾‹å¦‚ä¸€ç›´å¡åœ¨ä¸‹è½½imageæ˜ åƒ</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¸‹è½½</p>
<p>é€šè¿‡å®˜ç½‘æˆ–è€…é•œåƒæºä¸‹è½½rootfs.tar.xzå’Œmeta.tar.xz
<a href="https://mirrors.tuna.tsinghua.edu.cn/lxc-images/images/ubuntu/jammy/amd64/default/20260111_07:42/rootfs.tar.xz">https://mirrors.tuna.tsinghua.edu.cn/lxc-images/images/ubuntu/jammy/amd64/default/20260111_07:42/rootfs.tar.xz</a>
<a href="https://images.linuxcontainers.org/images/ubuntu/jammy/amd64/default/20260111_07:42/meta.tar.xz">https://images.linuxcontainers.org/images/ubuntu/jammy/amd64/default/20260111_07:42/meta.tar.xz</a></p>
<p>ç„¶åå°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨/home/x/lxc-files/rootfs.tar.xzï¼ˆæˆ–è€…æŒ‡å®šç›®å½•ä¸‹ï¼Œåœ¨ä¸‹æ–¹å‘½ä»¤ä¸­å¯¹åº”æ›¿æ¢å³å¯ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo lxc-create -n lxc1 -t <span class="nb">local</span> -- --fstree /home/x/lxc-files/rootfs.tar.xz --metadata /home/x/lxc-files/meta.tar.xz
</span></span></code></pre></div><p>ç„¶åå°±åˆ›å»ºæˆåŠŸ</p>
<h5 id="17-æ‰‹åŠ¨åˆ é™¤å®¹å™¨">1.7 æ‰‹åŠ¨åˆ é™¤å®¹å™¨</h5>
<p>åœ¨è·‘å®éªŒæ—¶ï¼Œä¼šé‡åˆ°å®¹å™¨æŸåï¼Œæ— æ³•å¼€æœºï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">x@x-Latitude-7300:~$ sudo lxc-start lxc1
</span></span><span class="line"><span class="cl">lxc-start: lxc1: lxccontainer.c: wait_on_daemonized_start: <span class="m">877</span> Received container state <span class="s2">&#34;ABORTING&#34;</span> instead of <span class="s2">&#34;RUNNING&#34;</span>
</span></span><span class="line"><span class="cl">lxc-start: lxc1: tools/lxc_start.c: main: <span class="m">306</span> The container failed to start
</span></span><span class="line"><span class="cl">lxc-start: lxc1: tools/lxc_start.c: main: <span class="m">309</span> To get more details, run the container in foreground mode
</span></span><span class="line"><span class="cl">lxc-start: lxc1: tools/lxc_start.c: main: <span class="m">311</span> Additional information can be obtained by setting the --logfile and --logpriority options
</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œæˆ‘å°è¯•ç”¨å¿«ç…§è¦†ç›–ï¼Œæˆ–è€…ç›´æ¥å¤åˆ¶å¿«ç…§ï¼Œéƒ½æ— æ³•è¿˜åŸå®¹å™¨ï¼Œé‚£åªèƒ½é‡æ–°åˆ›å»ºå®¹å™¨ï¼Œå¥½åœ¨æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨åˆ›å»ºçš„é€Ÿåº¦å¾ˆå¿«</p>
<p>ä½†æ˜¯åˆ›å»ºæ–°å®¹å™¨å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†åŸæ¥çš„å®¹å™¨åˆ é™¤ï¼Œå‘ç°æ‰‹åŠ¨æ— æ³•åˆ é™¤lxc1æ–‡ä»¶å¤¹ï¼Œå³ä½¿åœ¨rootæƒé™ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@x-Latitude-7300:/var/lib/lxc# rm -r lxc1/
</span></span><span class="line"><span class="cl">rm: cannot remove <span class="s1">&#39;lxc1/rootfs/etc/sudoers&#39;</span>: Operation not permitted
</span></span><span class="line"><span class="cl">rm: cannot remove <span class="s1">&#39;lxc1/rootfs/etc/passwd&#39;</span>: Operation not permitted
</span></span><span class="line"><span class="cl">rm: cannot remove <span class="s1">&#39;lxc1/rootfs/etc/shadow&#39;</span>: Operation not permitted
</span></span><span class="line"><span class="cl">rm: cannot remove <span class="s1">&#39;lxc1/rootfs/usr/games/.ssh/authorized_keys&#39;</span>: Operation not permitted
</span></span><span class="line"><span class="cl">rm: cannot remove <span class="s1">&#39;lxc1/rootfs/usr/games/.ssh/authorized_keys2&#39;</span>: Operation not permitted
</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œé€šè¿‡æŸ¥è¯¢äº†è§£åˆ°</p>
<p>å®¹å™¨é‡ŒæŸäº›å…³é”®æ–‡ä»¶ï¼ˆ/etc/passwdã€/etc/shadowã€authorized_keys ç­‰ï¼‰å¯èƒ½è¢«æŸäº›å®‰å…¨è„šæœ¬ã€æ¨¡æ¿ã€æˆ–ä½ /åˆ«äººæ‰‹åŠ¨è®¾ç½®äº† +a æ¥é˜²æ­¢æ„å¤–ä¿®æ”¹ã€‚</p>
<p>LXC æ¨¡æ¿æœ‰æ—¶ä¼šè¿™ä¹ˆåšï¼Œå°¤å…¶æ˜¯ privileged å®¹å™¨æˆ–æŸäº›å®‰å…¨åŠ å›ºè¿‡çš„é•œåƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@x-Latitude-7300:/var/lib/lxc# sudo lsattr -R /var/lib/lxc/lxc1/rootfs/etc/passwd 
</span></span><span class="line"><span class="cl">-----a--------e------- /var/lib/lxc/lxc1/rootfs/etc/passwd
</span></span></code></pre></div><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆç§»é™¤ append-only å±æ€§ï¼ˆå¿…é¡»é€’å½’å…¨å»æ‰ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo chattr -R -a /var/lib/lxc/lxc1/rootfs
</span></span></code></pre></div><p>å†æ¬¡æŸ¥è¯¢ï¼Œaå±æ€§æˆåŠŸå»é™¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@x-Latitude-7300:/var/lib/lxc# sudo lsattr -R /var/lib/lxc/lxc1/rootfs/etc/passwd
</span></span><span class="line"><span class="cl">--------------e------- /var/lib/lxc/lxc1/rootfs/etc/passwd
</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å†åˆ é™¤lxcå®¹å™¨æ–‡ä»¶å¤¹ï¼ŒæˆåŠŸåˆ é™¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo rm -rf /var/lib/lxc/lxc1
</span></span></code></pre></div>
</div>
    <div class="post__footer">
      
        <span><a class="category" href="/categories/blog/">Blog</a></span>


      

      
    </div>

    
  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Chenxi Dang
        2026
      
    </li>
    
      <li class="footer__item">
        <a
          class="link"
          href="/imprint/"
          
          title=""
        >
          æ³•å¾‹å£°æ˜
        </a>
      </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.9531b4a2217a70c5a1fce89c1f81c9ebbdd586708fcd4130b417320c7230c8d6.js"
    integrity="sha256-lTG0oiF6cMWh/OicH4HJ673VhnCPzUEwtBcyDHIwyNY="
    crossorigin="anonymous"
  ></script>
  <script async defer src=" https://scripts.simpleanalyticscdn.com/latest.js"></script>
  <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" /></noscript>

</body>
</html>
